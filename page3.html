<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flexi CBT â€“ Exam Instructions</title>
<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f4f6f4;
}

/* HEADER */
.header{
  background:#0b6623;
  color:white;
  padding:12px 18px;
  font-size:18px;
  font-weight:bold;
  text-align:center;
}

/* CONTAINER */
.container{
  max-width:600px;
  margin:40px auto;
  background:white;
  padding:25px;
  border:1px solid #c8e6c9;
  border-radius:10px;
}

/* TITLE */
h2{
  text-align:center;
  color:#0b6623;
  margin-top:0;
}

/* CANDIDATE INFO */
.candidate-info{
  text-align:left;
  color:#000000;
  margin-bottom:20px;
  line-height:1.4;
  font-weight:bold;
  font-size:14px;
  background:#f0f0f0;
  padding:10px;
  border-radius:6px;
  border:1px solid #ccc;
}

/* INSTRUCTIONS */
ul{
  padding-left:20px;
}
li{
  margin-bottom:10px;
  line-height:1.5;
}

/* CONFIRM */
.confirm{
  margin-top:20px;
  display:flex;
  align-items:center;
  gap:10px;
}
.confirm input{
  transform:scale(1.2);
  accent-color:#0b6623;
}

/* BUTTON */
button{
  margin-top:20px;
  width:100%;
  padding:12px;
  background:#0b6623;
  color:white;
  border:none;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  border-radius:8px;
}
button:disabled{
  background:#8fbc8f;
  cursor:not-allowed;
}
button:hover:enabled{
  background:#084d1a;
}
</style>
</head>
<body>

<div class="header">
  Flexi CBT Simulator
</div>

<div class="container">

  <!-- Candidate Info -->
  <div class="candidate-info" id="candidateInfo">
    Loading your info...
  </div>

  <h2>Examination Instructions</h2>

  <ul>
    <li>You have a limited time to complete this examination.</li>
    <li>English Language is compulsory.</li>
    <li>You are required to answer all questions.</li>
    <li>Only one option is correct for each question.</li>
    <li>Answered questions will be marked <b style="color:green;">green</b>; unanswered ones will be <b style="color:red;">red</b>.</li>
    <li>Use the navigation buttons to move between questions.</li>
    <li>Click the <b>Submit</b> button when you are done.</li>
    <li>Once submitted, you cannot return to the exam.</li>
  </ul>

  <div class="confirm">
    <input type="checkbox" id="agree">
    <label for="agree">I have read and understood the instructions</label>
  </div>

  <button id="startBtn" disabled>Start Examination</button>

</div>

<script>
// === Fetch candidate info from Page1/2 ===
const candidateInfoDiv = document.getElementById("candidateInfo");
const startBtn = document.getElementById("startBtn");
const agreeCheck = document.getElementById("agree");

const candidateName = localStorage.getItem("candidateName") || "";
const candidateWA = localStorage.getItem("candidateWhatsApp") || "";
const selectedSubjects = JSON.parse(localStorage.getItem("selectedSubjects") || "[]");

// Prevent skipping page 3
if(!candidateName || !candidateWA || selectedSubjects.length !== 4){
  alert("Session expired or invalid. Please start from login.");
  window.location.href = "page1.html";
}

// Display candidate info
candidateInfoDiv.innerHTML = `
  <strong>Name:</strong> ${candidateName}<br>
  <strong>WhatsApp:</strong> ${candidateWA}<br>
  <strong>Selected Subjects:</strong> ${selectedSubjects.join(", ")}
`;

// Enable start button only after checkbox
agreeCheck.addEventListener("change", () => {
  startBtn.disabled = !agreeCheck.checked;
});

// Start exam
startBtn.addEventListener("click", () => {
  window.location.href = "page4.html";
});
</script>

</body>
</html>